===============
total number of tokens in the current prompt:429

Generated query:

SELECT s.station_name AS station_name, 
       r.route_id AS route_id,
       r.line_id AS line_id,
       subq.route_cnt AS total_number_of_routes
FROM stations s
JOIN routes r ON s.station_id = r.first_station_id OR s.station_id = r.last_station_id
JOIN (SELECT station_id, COUNT(route_id) AS route_cnt
      FROM routes
      GROUP BY station_id) subq
ON s.station_id = subq.station_id
ORDER BY r.line_id, r.route_id;


===============
total number of tokens in the current prompt:429

Generated query:

SELECT s.station_name AS station_name, r.route_id AS route_id, r.line_id AS line_id, route_cnt
FROM stations s
JOIN routes r ON s.station_id = r.first_station_id OR s.station_id = r.last_station_id
JOIN (
    SELECT station_id, COUNT(route_id) AS route_cnt
    FROM (
        SELECT first_station_id AS station_id, route_id FROM routes
        UNION ALL
        SELECT last_station_id AS station_id, route_id FROM routes
    )
    GROUP BY station_id
) AS sub ON s.station_id = sub.station_id
WHERE route_cnt = (
    SELECT MAX(route_cnt) FROM (
        SELECT station_id, COUNT(route_id) AS route_cnt
        FROM (
            SELECT first_station_id AS station_id, route_id FROM routes
            UNION ALL
            SELECT last_station_id AS station_id, route_id FROM routes
        )
        GROUP BY station_id
    )
)
ORDER BY line_id ASC, route_id ASC;


Accuracy of test results (length 12) vs target results (length 12) is -1.0, 24 incorrect

time taken: 3.6044468879699707 seconds
===============
total number of tokens in the current prompt:429

Generated query:

SELECT s.station_name, r.route_id, r.line_id, max_routes.route_cnt
FROM stations s
JOIN routes r ON s.station_id = r.first_station_id OR s.station_id = r.last_station_id
JOIN (SELECT station_id, COUNT(route_id) AS route_cnt 
      FROM routes 
      GROUP BY station_id
      HAVING COUNT(route_id) = (SELECT MAX(route_count) 
                                FROM (SELECT station_id, COUNT(route_id) AS route_count 
                                      FROM routes 
                                      GROUP BY station_id)
                                )
     ) max_routes ON s.station_id = max_routes.station_id
ORDER BY r.line_id, r.route_id;


===============
total number of tokens in the current prompt:429

Generated query:

SELECT 
  s.station_name AS station_name,
  r.route_id AS route_id,
  r.line_id AS line_id,
  t.route_cnt AS total_routes_passing
FROM stations s
JOIN routes r ON s.station_id = r.first_station_id OR s.station_id = r.last_station_id
JOIN (
  SELECT 
    station_id, 
    COUNT(route_id) AS route_cnt
  FROM routes
  GROUP BY station_id
  HAVING route_cnt = (
    SELECT MAX(r_count)
    FROM (
      SELECT COUNT(route_id) AS r_count
      FROM routes
      GROUP BY station_id
    )
  )
) t ON s.station_id = t.station_id
ORDER BY line_id, route_id;


===============
total number of tokens in the current prompt:429

Generated query:

SELECT s.station_name, r.route_id, r.line_id, subq.route_cnt
FROM stations s
JOIN routes r ON r.first_station_id = s.station_id OR r.last_station_id = s.station_id
JOIN (SELECT station_id, COUNT(route_id) AS route_cnt
      FROM routes
      GROUP BY station_id) subq ON subq.station_id = s.station_id
ORDER BY r.line_id ASC, r.route_id ASC;


error running sql query: no such column: station_id
===============
total number of tokens in the current prompt:429

Generated query:

SELECT s.station_name, r.route_id, r.line_id, r.route_cnt
FROM (
    SELECT station_id, COUNT(route_id) AS route_cnt
    FROM station_orders
    GROUP BY station_id
    ORDER BY route_cnt DESC
    LIMIT 1
) AS max_routes
JOIN stations s ON s.station_id = max_routes.station_id
JOIN (
    SELECT station_id, route_id, line_id
    FROM routes
) AS r 
ON r.station_id = max_routes.station_id
ORDER BY r.line_id, r.route_id;


error running sql query: no such column: station_id
