===============
total number of tokens in the current prompt:613

Generated query:
SELECT
    stations.station_name,
    lines.line_name,
    MAX((total_flow - (total_ons + total_offs)) / total_flow) as bypass_ratio
FROM
    (SELECT 
        rail_ridership.station_id, 
        rail_ridership.line_id, 
        SUM(rail_ridership.average_flow) AS total_flow, 
        SUM(rail_ridership.average_ons) AS total_ons, 
        SUM(rail_ridership.average_offs) AS total_offs
    FROM 
        rail_ridership
    WHERE 
        rail_ridership.season = 'Fall 2019'
    GROUP BY 
        rail_ridership.station_id, 
        rail_ridership.line_id) AS flow_data
JOIN
    stations
ON
    flow_data.station_id = stations.station_id
JOIN
    lines
ON
    flow_data.line_id = lines.line_id
GROUP BY 
    flow_data.station_id,
    lines.line_name
ORDER BY 
    lines.line_name ASC;

Accuracy of test results (length 119) vs target results (length 4) is -29.75, 123 incorrect

time taken: 9.436219215393066 seconds
===============
total number of tokens in the current prompt:613

Generated query:
SELECT 
    stations.station_name, 
    lines.line_name, 
    ((SUM(rail_ridership.average_flow) - (SUM(rail_ridership.average_ons) + SUM(rail_ridership.average_offs))) / CAST(SUM(rail_ridership.average_flow) AS REAL)) as bypassed_ratio
FROM 
    rail_ridership
INNER JOIN 
    stations 
ON 
    rail_ridership.station_id = stations.station_id
INNER JOIN
    lines
ON
    rail_ridership.line_id = lines.line_id
WHERE
    rail_ridership.season = 'Fall 2019'
GROUP BY 
    rail_ridership.station_id, 
    rail_ridership.line_id
ORDER BY 
    lines.line_name ASC;

Accuracy of test results (length 119) vs target results (length 4) is -27.75, 115 incorrect

time taken: 7.833784103393555 seconds
===============
total number of tokens in the current prompt:613

Generated query:
SELECT
  stations.station_name,
  lines.line_name,
  MAX((total_flow - (total_ons + total_offs)) /  CAST(total_flow AS REAL)) AS max_bypassed_ratio
FROM (
  SELECT
    rail_ridership.station_id,
    rail_ridership.line_id,
    SUM(rail_ridership.average_flow) AS total_flow,
    SUM(rail_ridership.average_ons) AS total_ons,
    SUM(rail_ridership.average_offs) AS total_offs
  FROM
    rail_ridership
  WHERE
    rail_ridership.season = 'Fall 2019'
  GROUP BY
    rail_ridership.station_id,
    rail_ridership.line_id
) AS subquery
JOIN stations ON stations.station_id = subquery.station_id
JOIN lines ON lines.line_id = subquery.line_id
GROUP BY
  stations.station_name,
  lines.line_name
ORDER BY
  lines.line_name ASC;

Accuracy of test results (length 119) vs target results (length 4) is -27.75, 115 incorrect

time taken: 10.465702772140503 seconds
===============
total number of tokens in the current prompt:613

Generated query:
SELECT 
    stations.station_name,
    lines.line_name,
    MAX((total_flow - (total_ons + total_offs))/total_flow) AS 'bypassed_ratio'
FROM
    (SELECT 
        rail_ridership.station_id,
        rail_ridership.line_id,
        SUM(CAST(rail_ridership.average_flow AS REAL)) AS 'total_flow',
        SUM(rail_ridership.average_ons) AS 'total_ons',
        SUM(rail_ridership.average_offs) AS 'total_offs'
     FROM 
        rail_ridership
     WHERE 
        rail_ridership.season = 'Fall 2019'
     GROUP BY 
        rail_ridership.station_id, rail_ridership.line_id
    ) AS derived_table
INNER JOIN 
    stations ON derived_table.station_id = stations.station_id
INNER JOIN 
    lines ON derived_table.line_id = lines.line_id
GROUP BY 
    stations.station_name,
    lines.line_name
ORDER BY
    lines.line_name ASC;

Accuracy of test results (length 119) vs target results (length 4) is -27.75, 115 incorrect

time taken: 10.439563989639282 seconds
===============
total number of tokens in the current prompt:613

Generated query:
SELECT lines.line_name, stations.station_name,
       ((sum_flow - (sum_avg_ons + sum_avg_offs)) / CAST(sum_flow AS REAL)) as bypassed_ratio
FROM
    (SELECT station_id, line_id, SUM(average_flow) AS sum_flow, 
             SUM(average_ons) AS sum_avg_ons, SUM(average_offs) AS sum_avg_offs
     FROM rail_ridership
     WHERE season = 'Fall 2019'
     GROUP BY station_id, line_id) as ridership_data
JOIN stations ON ridership_data.station_id = stations.station_id
JOIN lines ON ridership_data.line_id = lines.line_id
ORDER BY lines.line_name;

Accuracy of test results (length 119) vs target results (length 4) is -29.75, 123 incorrect

time taken: 6.822252035140991 seconds
===============
total number of tokens in the current prompt:613

Generated query:
SELECT 
    stations.station_name,
    lines.line_name,
    ((CAST(SUM(rail_ridership.average_flow) AS REAL) - (SUM(rail_ridership.average_ons) + SUM(rail_ridership.average_offs))) / CAST(SUM(rail_ridership.average_flow) AS REAL)) as bypassed_ratio
FROM 
    rail_ridership
    JOIN stations ON rail_ridership.station_id = stations.station_id
    JOIN lines ON rail_ridership.line_id = lines.line_id
WHERE 
    rail_ridership.season = 'Fall 2019'
GROUP BY 
    rail_ridership.station_id, 
    stations.station_name, 
    lines.line_name
HAVING 
    CAST(SUM(rail_ridership.average_flow) AS REAL) > 0
ORDER BY 
    ((CAST(SUM(rail_ridership.average_flow) AS REAL) - (SUM(rail_ridership.average_ons) + SUM(rail_ridership.average_offs))) / CAST(SUM(rail_ridership.average_flow) AS REAL)) DESC,
    lines.line_name ASC;

Accuracy of test results (length 119) vs target results (length 4) is -27.75, 115 incorrect

time taken: 13.657138109207153 seconds
