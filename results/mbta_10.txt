===============
total number of tokens in the current prompt:555

Generated query:
SELECT
    s.station_name,
    l.line_name,
    MAX((CAST(SUM(rr.average_flow) AS REAL) - (SUM(rr.average_ons) + SUM(rr.average_offs))) / CAST(SUM(rr.average_flow) AS REAL)) as bypass_ratio
FROM
    rail_ridership rr
JOIN
    stations s ON rr.station_id = s.station_id
JOIN
    lines l ON rr.line_id = l.line_id
WHERE
    rr.season = 'Fall 2019'
GROUP BY
    rr.station_id, rr.line_id
ORDER BY
    l.line_name ASC;

error running sql query: misuse of aggregate function SUM()
===============
total number of tokens in the current prompt:555

Generated query:
SELECT
    stations.station_name,
    lines.line_name,
    MAX((CAST(sums.sum_avg_flow AS REAL) - (sums.sum_avg_ons + sums.sum_avg_offs)) / CAST(sums.sum_avg_flow AS REAL)) AS bypassed_ratio
FROM
    stations
INNER JOIN
    (
        SELECT
            rail_ridership.station_id,
            rail_ridership.line_id,
            SUM(rail_ridership.average_flow) AS sum_avg_flow,
            SUM(rail_ridership.average_ons) AS sum_avg_ons,
            SUM(rail_ridership.average_offs) AS sum_avg_offs
        FROM
            rail_ridership
        WHERE
            rail_ridership.season = 'Fall 2019'
        GROUP BY
            rail_ridership.station_id, rail_ridership.line_id
    ) sums
ON
    stations.station_id = sums.station_id
INNER JOIN
    lines
ON
    sums.line_id = lines.line_id
GROUP BY
    stations.station_name, lines.line_name
ORDER BY
    lines.line_name ASC;

Accuracy of test results (length 119) vs target results (length 4) is -27.75, 115 incorrect

time taken: 10.69800615310669 seconds
===============
total number of tokens in the current prompt:555

Generated query:
SELECT bypassed_max.station_name, bypassed_max.line_name, bypassed_max.bypassed_ratio
FROM 
    (SELECT station_name, line_name, MAX(bypassed_ratio) AS bypassed_ratio
    FROM
        (SELECT st.station_name, ln.line_name, 
        (CAST(SUM(average_flow) AS REAL) - (SUM(average_ons) + SUM(average_offs))) / CAST(SUM(average_flow) AS REAL) AS bypassed_ratio
        FROM rail_ridership rr
        INNER JOIN stations st ON rr.station_id = st.station_id
        INNER JOIN lines ln ON rr.line_id = ln.line_id
        WHERE rr.season = 'Fall 2019'
        GROUP BY rr.station_id, rr.line_id)) AS bypassed_max 
ORDER BY bypassed_max.line_name ASC;


Accuracy of test results (length 1) vs target results (length 4) is 0.25, 3 incorrect

time taken: 9.4949471950531 seconds
===============
total number of tokens in the current prompt:555

Generated query:
SELECT
    s.station_name,
    l.line_name,
    MAX((CAST(SUM(rr.average_flow) AS REAL) - (SUM(rr.average_ons) + SUM(rr.average_offs))) / CAST(SUM(rr.average_flow) AS REAL)) as 'maximally_bypassed_ratio'
FROM
    rail_ridership rr
INNER JOIN lines l ON rr.line_id = l.line_id
INNER JOIN stations s ON rr.station_id = s.station_id
WHERE
    rr.season = 'Fall 2019'
GROUP BY
    rr.station_id,
    rr.line_id
ORDER BY
    l.line_name ASC;

error running sql query: misuse of aggregate function SUM()
===============
total number of tokens in the current prompt:555

Generated query:
SELECT 
    s.station_name,
    l.line_name,
    MAX((CAST(SUM(r.average_flow) AS REAL) - (SUM(r.average_ons) + SUM(r.average_offs))) / CAST(SUM(r.average_flow) AS REAL)) AS bypassed_ratio
FROM 
    rail_ridership r
    INNER JOIN stations s ON r.station_id = s.station_id
    INNER JOIN lines l ON r.line_id = l.line_id
WHERE 
    r.season = 'Fall 2019'
GROUP BY 
    s.station_name, 
    l.line_name
ORDER BY 
    l.line_name ASC;

error running sql query: misuse of aggregate function SUM()
===============
total number of tokens in the current prompt:555

Generated query:
SELECT 
    S.station_name AS "Station Name", 
    L.line_name AS "Line Name", 
    ((cast(sum(R.average_flow) as real) - sum(R.average_ons + R.average_offs))/cast(sum(R.average_flow) as real)) AS "Bypassed Ratio"
FROM 
    rail_ridership R
JOIN 
    stations S ON R.station_id = S.station_id
JOIN 
    lines L ON R.line_id = L.line_id
WHERE 
    R.season = 'Fall 2019'
GROUP BY 
    S.station_name, 
    L.line_name
ORDER BY 
    "Line Name" ASC;

Accuracy of test results (length 119) vs target results (length 4) is -27.75, 115 incorrect

time taken: 6.389132976531982 seconds
