===============
total number of tokens in the current prompt:396

Generated query:

SELECT r.route_id,
       r.direction,
       r.route_name,
       COUNT(so.stop_order) AS number_of_stations,
       SUM(so.distance_from_last_station_miles) AS length_in_miles
  FROM routes r
       JOIN station_orders so ON r.route_id = so.route_id
       JOIN lines l ON r.line_id = l.line_id
 WHERE l.line_name != 'Green Line'
 GROUP BY r.route_id, r.route_name, r.direction
 ORDER BY COUNT(so.stop_order) DESC, SUM(so.distance_from_last_station_miles) DESC;


Accuracy of test results (length 10) vs target results (length 10) is 1.0

time taken: 2.469254970550537 seconds
===============
total number of tokens in the current prompt:396

Generated query:

SELECT r.route_id, r.direction, r.route_name, 
       COUNT(so.station_id) AS number_of_stations, 
       SUM(so.distance_from_last_station_miles) AS length_in_miles
FROM routes r
JOIN station_orders so ON r.route_id = so.route_id
WHERE r.line_id <> 'Green'
GROUP BY r.route_id, r.direction, r.route_name
ORDER BY number_of_stations DESC, length_in_miles DESC;


Accuracy of test results (length 18) vs target results (length 10) is 0.2

time taken: 2.3556108474731445 seconds
===============
total number of tokens in the current prompt:396

Generated query:

WITH line_route_length AS (
  SELECT
    r.route_id,
    r.line_id,
    r.direction,
    r.route_name,
    COUNT(s.station_id) AS num_stations,
    SUM(s.distance_from_last_station_miles) AS total_length
  FROM routes r
  JOIN station_orders s ON r.route_id = s.route_id
  WHERE r.line_id != 'Green'
  GROUP BY r.route_id, r.line_id, r.direction, r.route_name
)

SELECT
  l.route_id,
  l.direction,
  l.route_name,
  l.num_stations,
  l.total_length
FROM line_route_length l
ORDER BY l.num_stations DESC, l.total_length DESC;


Accuracy of test results (length 18) vs target results (length 10) is 0.2

time taken: 3.175442934036255 seconds
